<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/offline/action-handler-service" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">ActionHandlerService | Talawa Mobile Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs-mobile.talawa.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs-mobile.talawa.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs-mobile.talawa.io/docs/docs/offline/action-handler-service"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ActionHandlerService | Talawa Mobile Documentation"><meta data-rh="true" name="description" content="The ActionHandlerService provides a standardized way to handle both optimistic and critical user actions within the application, ensuring that they are executed consistently, regardless of whether the user is online or offline. This documentation outlines the flow of the performAction method, with detailed step-by-step explanations for both optimistic and critical actions."><meta data-rh="true" property="og:description" content="The ActionHandlerService provides a standardized way to handle both optimistic and critical user actions within the application, ensuring that they are executed consistently, regardless of whether the user is online or offline. This documentation outlines the flow of the performAction method, with detailed step-by-step explanations for both optimistic and critical actions."><link data-rh="true" rel="icon" href="/img/icons/logo.png"><link data-rh="true" rel="canonical" href="https://docs-mobile.talawa.io/docs/docs/offline/action-handler-service"><link data-rh="true" rel="alternate" href="https://docs-mobile.talawa.io/docs/docs/offline/action-handler-service" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs-mobile.talawa.io/docs/docs/offline/action-handler-service" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.157b7dbf.css">
<script src="/assets/js/runtime~main.f126f4bf.js" defer="defer"></script>
<script src="/assets/js/main.f2a347ac.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.talawa.io/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/icons/logo.png" alt="Talawa Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/icons/logo.png" alt="Talawa Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Talawa</b></a><a href="https://docs.talawa.io/docs" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">General</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Mobile Guide</a><a href="https://docs-admin.talawa.io/docs" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Admin Guide</a><a href="https://docs-api.talawa.io/docs" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">API Guide</a><a href="https://demo.talawa.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/PalisadoesFoundation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://www.youtube.com/@PalisadoesOrganization" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-youtube-link" aria-label="Palisadoes Youtube channel"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docs/talawa-lint">Talawa Lint Ecosystem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/docs/flutter-testing">Flutter Testing Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/docs/offline/action-handler-service">Offline Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/docs/offline/action-handler-service">ActionHandlerService</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/offline/feed-caching">Feed Caching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/offline/offline-user-actions">Offline User Actions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/auto-docs/apptheme/">Code Documentation</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Offline Features</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ActionHandlerService</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ActionHandlerService</h1></header><p>The <strong>ActionHandlerService</strong> provides a standardized way to handle both optimistic and critical user actions within the application, ensuring that they are executed consistently, regardless of whether the user is online or offline. This documentation outlines the flow of the <code>performAction</code> method, with detailed step-by-step explanations for both optimistic and critical actions.</p>
<p>The service focuses on:</p>
<ul>
<li><strong>Optimistic actions</strong>: These actions immediately update the UI, assuming that the API call will succeed.</li>
<li><strong>Critical actions</strong>: These actions wait for the API call to succeed before updating the UI. They are important actions that require confirmation from the server.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-features">Key Features:<a href="#key-features" class="hash-link" aria-label="Direct link to Key Features:" title="Direct link to Key Features:">​</a></h2>
<ul>
<li>Handles API calls with extensive error handling and optional UI updates.</li>
<li>Supports optimistic and critical actions with distinct UI behaviors.</li>
<li>Provides hooks for handling valid results, exceptions, and final tasks after API execution.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="actionhandlerservice-performaction-flow"><strong>ActionHandlerService PerformAction Flow</strong><a href="#actionhandlerservice-performaction-flow" class="hash-link" aria-label="Direct link to actionhandlerservice-performaction-flow" title="Direct link to actionhandlerservice-performaction-flow">​</a></h2>
<p><img decoding="async" loading="lazy" alt="ActionHandler PerformAction Flow" src="/assets/images/perform_action_wrapper_flow-8ba84044e42218540ec5f54a4ce8dfe4.png" width="1530" height="755" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-user-initiates-an-action">1. User Initiates an Action<a href="#1-user-initiates-an-action" class="hash-link" aria-label="Direct link to 1. User Initiates an Action" title="Direct link to 1. User Initiates an Action">​</a></h3>
<p>The user triggers an action in the app, such as liking a post, commenting, or creating/deleting an event. Each action is routed through the <strong>performAction</strong> method of the <code>ActionHandlerService</code>, which wraps the action with logic to handle network status, UI updates, and error management.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-wrapping-actions-with-actionhandlerservice">2. Wrapping Actions with ActionHandlerService<a href="#2-wrapping-actions-with-actionhandlerservice" class="hash-link" aria-label="Direct link to 2. Wrapping Actions with ActionHandlerService" title="Direct link to 2. Wrapping Actions with ActionHandlerService">​</a></h3>
<p>The <code>performAction</code> method serves as a central point for managing all user actions. It handles:</p>
<ul>
<li>UI updates for optimistic actions.</li>
<li>Network state detection.</li>
<li>Executing API calls asynchronously.</li>
<li>Offline behavior management, including retries for actions.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-action-type-decision">3. Action Type Decision<a href="#3-action-type-decision" class="hash-link" aria-label="Direct link to 3. Action Type Decision" title="Direct link to 3. Action Type Decision">​</a></h3>
<p>The <code>performAction</code> method categorizes actions as either <strong>optimistic</strong> or <strong>critical</strong>:</p>
<ul>
<li><strong>Optimistic Actions</strong>: These actions (e.g., liking or commenting on a post) allow immediate UI feedback to the user before confirmation from the server.</li>
<li><strong>Critical Actions</strong>: These actions (e.g., creating or deleting a post) require reliable server interaction and will only update the UI after the server response.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-handling-optimistic-actions">4. Handling Optimistic Actions<a href="#4-handling-optimistic-actions" class="hash-link" aria-label="Direct link to 4. Handling Optimistic Actions" title="Direct link to 4. Handling Optimistic Actions">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="i-ui-update-prior-to-api-call">i. UI Update Prior to API Call<a href="#i-ui-update-prior-to-api-call" class="hash-link" aria-label="Direct link to i. UI Update Prior to API Call" title="Direct link to i. UI Update Prior to API Call">​</a></h4>
<p>For optimistic actions, the UI is updated immediately after the action is performed, giving the user instant feedback. For example, when a user likes a post, the like button changes to the &quot;liked&quot; state.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ii-execute-api-call">ii. Execute API Call<a href="#ii-execute-api-call" class="hash-link" aria-label="Direct link to ii. Execute API Call" title="Direct link to ii. Execute API Call">​</a></h4>
<p>After the UI update, the <code>executeApiCall</code> method is called asynchronously to send the action request to the server.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iii-post-api-behavior">iii. Post-API Behavior<a href="#iii-post-api-behavior" class="hash-link" aria-label="Direct link to iii. Post-API Behavior" title="Direct link to iii. Post-API Behavior">​</a></h4>
<ul>
<li><strong>Success Case</strong>: If the API call succeeds, the UI is already updated, so no further action is required.</li>
<li><strong>Failure Case</strong>: If the API call fails (e.g., the user is offline), the user is notified that the action will be performed once the device is back online.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="error-handling-for-optimistic-actions">Error Handling for Optimistic Actions<a href="#error-handling-for-optimistic-actions" class="hash-link" aria-label="Direct link to Error Handling for Optimistic Actions" title="Direct link to Error Handling for Optimistic Actions">​</a></h4>
<p>In case of failure, optimistic actions should have robust error handling to notify the user and queue the action for later execution.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-handling-critical-actions">5. Handling Critical Actions<a href="#5-handling-critical-actions" class="hash-link" aria-label="Direct link to 5. Handling Critical Actions" title="Direct link to 5. Handling Critical Actions">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="i-check-network-status">i. Check Network Status<a href="#i-check-network-status" class="hash-link" aria-label="Direct link to i. Check Network Status" title="Direct link to i. Check Network Status">​</a></h4>
<p>The network status is checked before executing critical actions to determine whether the user is online or offline.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ia-online-status">ia. Online Status<a href="#ia-online-status" class="hash-link" aria-label="Direct link to ia. Online Status" title="Direct link to ia. Online Status">​</a></h4>
<ul>
<li><strong>Execute API Call</strong>: If the device is online, the <code>executeApiCall</code> method sends the request to the server.</li>
<li><strong>Post-API UI Update</strong>: Once the server confirms the action, the UI is updated accordingly (e.g., the new post appears in the feed).</li>
<li><strong>ApiCallSuccess Callback</strong>: After the API call completes, additional tasks like notifications or navigation are triggered via the success callback.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ib-offline-status">ib. Offline Status<a href="#ib-offline-status" class="hash-link" aria-label="Direct link to ib. Offline Status" title="Direct link to ib. Offline Status">​</a></h4>
<p>If the device is offline, the user is notified, and no API call is made. The user is asked to retry once the device is connected to the internet.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-the-executeapicall-method">6. The <code>executeApiCall</code> Method<a href="#6-the-executeapicall-method" class="hash-link" aria-label="Direct link to 6-the-executeapicall-method" title="Direct link to 6-the-executeapicall-method">​</a></h3>
<p>The <code>executeApiCall</code> method is responsible for:</p>
<ul>
<li><strong>Asynchronous Network Request</strong>: Sending the API request without blocking the UI.</li>
<li><strong>Error Handling</strong>: Managing network failures or server errors by informing the user or retrying the action.</li>
<li><strong>Success Callback</strong>: Triggering additional tasks after the API call completes successfully.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-optimizing-for-offline-first-design">7. Optimizing for Offline-First Design<a href="#7-optimizing-for-offline-first-design" class="hash-link" aria-label="Direct link to 7. Optimizing for Offline-First Design" title="Direct link to 7. Optimizing for Offline-First Design">​</a></h3>
<p>The <code>performAction</code> method is designed to accommodate offline scenarios:</p>
<ul>
<li><strong>Optimistic Actions</strong>: The UI is updated before the server response to provide a seamless user experience.</li>
<li><strong>Critical Actions</strong>: API calls are only made when the device is online, ensuring data integrity.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-summary-of-key-flows">8. Summary of Key Flows<a href="#8-summary-of-key-flows" class="hash-link" aria-label="Direct link to 8. Summary of Key Flows" title="Direct link to 8. Summary of Key Flows">​</a></h3>
<ul>
<li><strong>Optimistic Actions</strong>:<!-- -->
<ul>
<li>Immediate UI update followed by API call.</li>
<li>Error handling for failed API calls.</li>
</ul>
</li>
<li><strong>Critical Actions</strong>:<!-- -->
<ul>
<li>Network status is checked before performing the action.</li>
<li>Online: API call, followed by UI update and success callback.</li>
<li>Offline: User is notified, and no action is taken.</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="methods">Methods:<a href="#methods" class="hash-link" aria-label="Direct link to Methods:" title="Direct link to Methods:">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="executeapicall"><code>executeApiCall</code><a href="#executeapicall" class="hash-link" aria-label="Direct link to executeapicall" title="Direct link to executeapicall">​</a></h4>
<p>Executes an API action with appropriate error handling.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters:<a href="#parameters" class="hash-link" aria-label="Direct link to Parameters:" title="Direct link to Parameters:">​</a></h5>
<ul>
<li><code>action</code>: A function that performs the API call and returns a <code>Future&lt;QueryResult&lt;Object?&gt;?&gt;</code>.</li>
<li><code>onValidResult</code>: A callback function that processes the API call result when it is successful.</li>
<li><code>onActionException</code>: A callback function that handles any exceptions that occur during the API call.</li>
<li><code>onActionFinally</code>: A callback function that executes regardless of the success or failure of the API call (typically used for cleanup tasks).</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="returns">Returns:<a href="#returns" class="hash-link" aria-label="Direct link to Returns:" title="Direct link to Returns:">​</a></h5>
<ul>
<li><code>Future&lt;bool?&gt;</code>: A boolean indicating the success (<code>true</code>), failure (<code>false</code>), or <code>null</code> if the result is invalid.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example">Usage Example:<a href="#usage-example" class="hash-link" aria-label="Direct link to Usage Example:" title="Direct link to Usage Example:">​</a></h4>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">final result = await actionHandlerService.executeApiCall(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  action: () async =&gt; await yourGraphqlClient.query(options),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  onValidResult: (result) async {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Handle valid result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  onActionException: (e) async {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Handle exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  onActionFinally: () async {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Perform final cleanup or update UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performaction"><code>performAction</code><a href="#performaction" class="hash-link" aria-label="Direct link to performaction" title="Direct link to performaction">​</a></h3>
<p>Executes a user action based on its type (<code>optimistic</code> or <code>critical</code>), updating the UI and handling errors accordingly.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-1">Parameters:<a href="#parameters-1" class="hash-link" aria-label="Direct link to Parameters:" title="Direct link to Parameters:">​</a></h4>
<ul>
<li><code>actionType</code>: Specifies whether the action is optimistic or critical. (<code>ActionType.optimistic</code> or <code>ActionType.critical</code>).</li>
<li><code>action</code>: The action to perform, which returns a <code>Future&lt;QueryResult&lt;Object?&gt;?&gt;</code>.</li>
<li><code>onValidResult</code>: A callback function that processes the result when the action is successful.</li>
<li><code>onActionException</code>: A callback function that handles exceptions during the action.</li>
<li><code>updateUI</code>: A callback function to update the UI. For optimistic actions, it runs immediately; for critical actions, it runs after the API call.</li>
<li><code>apiCallSuccessUpdateUI</code>: A callback function to update the UI after a successful API call.</li>
<li><code>criticalActionFailureMessage</code>: A string for the error message used when a critical action fails.</li>
<li><code>onActionFinally</code>: A callback function to execute regardless of the success or failure of the action.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="returns-1">Returns:<a href="#returns-1" class="hash-link" aria-label="Direct link to Returns:" title="Direct link to Returns:">​</a></h4>
<ul>
<li><code>Future&lt;void&gt;</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example-1">Usage Example:<a href="#usage-example-1" class="hash-link" aria-label="Direct link to Usage Example:" title="Direct link to Usage Example:">​</a></h4>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">await actionHandlerService.performAction(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  actionType: ActionType.optimistic,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  action: () async =&gt; await yourGraphqlClient.query(options),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  onValidResult: (result) async {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Handle valid result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  onActionException: (e) async {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Handle exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  updateUI: () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Immediately update UI for optimistic action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  apiCallSuccessUpdateUI: () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Update UI after API call success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  criticalActionFailureMessage: &#x27;Failed to save your action. Please try again.&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  onActionFinally: () async {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Perform final cleanup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optimistic-vs-critical-actions">Optimistic vs. Critical Actions<a href="#optimistic-vs-critical-actions" class="hash-link" aria-label="Direct link to Optimistic vs. Critical Actions" title="Direct link to Optimistic vs. Critical Actions">​</a></h2>
<ul>
<li><strong>Optimistic actions</strong> immediately update the UI before the API call is made. This improves perceived responsiveness, but the UI may need to be rolled back if the API call fails.</li>
<li><strong>Critical actions</strong> wait for a response from the server before updating the UI. This ensures that the UI reflects the actual state after the server confirms the action.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error-handling">Error Handling<a href="#error-handling" class="hash-link" aria-label="Direct link to Error Handling" title="Direct link to Error Handling">​</a></h2>
<p>The <code>ActionHandlerService</code> is designed to gracefully handle exceptions. For optimistic actions, the UI is updated before the API call, but if an error occurs, a rollback or UI adjustment might be needed. For critical actions, error messages are handled based on the type of error, and the UI is updated accordingly.</p>
<p>In case the device is offline, a <strong>critical action</strong> will trigger an exception with a user-friendly message, notifying the user that their action was not saved.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example:<a href="#example" class="hash-link" aria-label="Direct link to Example:" title="Direct link to Example:">​</a></h4>
<div class="language-dart codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dart codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (await connectivityViewModel.isOnline()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await actionHandlerService.performAction(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    actionType: ActionType.critical,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    action: () async =&gt; await yourGraphqlClient.mutate(options),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    onValidResult: (result) async {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Handle valid mutation result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    onActionException: (e) async {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Handle exception, such as showing an error message to the user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updateUI: () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Update UI only after the API call for critical actions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apiCallSuccessUpdateUI: () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Additional UI update on successful API call</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    criticalActionFailureMessage: &#x27;Failed to save critical action. Please try again.&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    onActionFinally: () async {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Perform any final tasks after the API call</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Handle the case where the device is offline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  showOfflineError();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/PalisadoesFoundation/talawa/edit/develop/docs/docs/docs/offline/action-handler-service.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/docs/flutter-testing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Flutter Testing Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/docs/offline/feed-caching"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Feed Caching</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#key-features" class="table-of-contents__link toc-highlight">Key Features:</a></li><li><a href="#actionhandlerservice-performaction-flow" class="table-of-contents__link toc-highlight"><strong>ActionHandlerService PerformAction Flow</strong></a><ul><li><a href="#1-user-initiates-an-action" class="table-of-contents__link toc-highlight">1. User Initiates an Action</a></li><li><a href="#2-wrapping-actions-with-actionhandlerservice" class="table-of-contents__link toc-highlight">2. Wrapping Actions with ActionHandlerService</a></li><li><a href="#3-action-type-decision" class="table-of-contents__link toc-highlight">3. Action Type Decision</a></li><li><a href="#4-handling-optimistic-actions" class="table-of-contents__link toc-highlight">4. Handling Optimistic Actions</a></li><li><a href="#5-handling-critical-actions" class="table-of-contents__link toc-highlight">5. Handling Critical Actions</a></li><li><a href="#6-the-executeapicall-method" class="table-of-contents__link toc-highlight">6. The <code>executeApiCall</code> Method</a></li><li><a href="#7-optimizing-for-offline-first-design" class="table-of-contents__link toc-highlight">7. Optimizing for Offline-First Design</a></li><li><a href="#8-summary-of-key-flows" class="table-of-contents__link toc-highlight">8. Summary of Key Flows</a></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods:</a></li><li><a href="#performaction" class="table-of-contents__link toc-highlight"><code>performAction</code></a></li></ul></li><li><a href="#optimistic-vs-critical-actions" class="table-of-contents__link toc-highlight">Optimistic vs. Critical Actions</a></li><li><a href="#error-handling" class="table-of-contents__link toc-highlight">Error Handling</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/PalisadoesFoundation" target="_blank" rel="noopener noreferrer" class="footer__icon footer__slack">Slack</a></li><li class="footer__item"><a href="https://www.palisadoes.org/news/" target="_blank" rel="noopener noreferrer" class="footer__icon footer__news">News</a></li><li class="footer__item"><a href="https://www.palisadoes.org/contact/" target="_blank" rel="noopener noreferrer" class="footer__icon footer__contact">Contact Us</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social Media</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/palisadoesorg?lang=en" target="_blank" rel="noopener noreferrer" class="footer__icon footer__twitter"> Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/palisadoesproject/" target="_blank" rel="noopener noreferrer" class="footer__icon footer__facebook"> Facebook</a></li><li class="footer__item"><a href="https://www.instagram.com/palisadoes/?hl=en" target="_blank" rel="noopener noreferrer" class="footer__icon footer__instagram"> Instagram</a></li></ul></div><div class="col footer__col"><div class="footer__title">Development</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/PalisadoesFoundation" target="_blank" rel="noopener noreferrer" class="footer__icon footer__github"> GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 The Palisadoes Foundation, LLC. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>