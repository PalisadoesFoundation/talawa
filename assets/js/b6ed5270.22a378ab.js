"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[43792],{11678:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"docs/developer-resources/general/handling-upgrades","title":"Handling Upgrades","description":"Handling Dependencies & SDK Upgrades","source":"@site/docs/docs/developer-resources/general/handling-upgrades.md","sourceDirName":"docs/developer-resources/general","slug":"/developer-resources/handling-upgrades","permalink":"/docs/developer-resources/handling-upgrades","draft":false,"unlisted":false,"editUrl":"https://github.com/PalisadoesFoundation/talawa/edit/develop/docs/docs/docs/developer-resources/general/handling-upgrades.md","tags":[],"version":"current","sidebarPosition":40,"frontMatter":{"id":"handling-upgrades","title":"Handling Upgrades","slug":"/developer-resources/handling-upgrades","sidebar_position":40},"sidebar":"tutorialSidebar","previous":{"title":"Talawa Lint Ecosystem","permalink":"/docs/developer-resources/talawa-lint"},"next":{"title":"Offline User Actions","permalink":"/docs/developer-resources/offline/offline-user-actions"}}');var i=s(86070),a=s(45906);const l={id:"handling-upgrades",title:"Handling Upgrades",slug:"/developer-resources/handling-upgrades",sidebar_position:40},d=void 0,o={},c=[{value:"Handling Dependencies &amp; SDK Upgrades",id:"handling-dependencies--sdk-upgrades",level:2},{value:"The Common Conflict: <code>talawa_lint</code> vs SDK",id:"the-common-conflict-talawa_lint-vs-sdk",level:3},{value:"How to Fix It",id:"how-to-fix-it",level:3},{value:"Diagnosing Conflicts",id:"diagnosing-conflicts",level:3}];function t(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"handling-dependencies--sdk-upgrades",children:"Handling Dependencies & SDK Upgrades"}),"\n",(0,i.jsxs)(n.p,{children:['Upgrading dependencies in a large Flutter project like Talawa can sometimes be tricky due to "diamond dependency" conflicts. This is often caused by local packages (like ',(0,i.jsx)(n.code,{children:"talawa_lint"}),") having stricter version constraints than the main project."]}),"\n",(0,i.jsxs)(n.h3,{id:"the-common-conflict-talawa_lint-vs-sdk",children:["The Common Conflict: ",(0,i.jsx)(n.code,{children:"talawa_lint"})," vs SDK"]}),"\n",(0,i.jsxs)(n.p,{children:["When you try to upgrade the Flutter SDK or main dependencies (like ",(0,i.jsx)(n.code,{children:"build_runner"}),"), you might encounter a version solving error related to ",(0,i.jsx)(n.code,{children:"analyzer"})," or ",(0,i.jsx)(n.code,{children:"macros"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why this happens:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Newer SDKs/plugins require a newer version of the ",(0,i.jsx)(n.code,{children:"analyzer"})," package (e.g., ",(0,i.jsx)(n.code,{children:"> 6.0"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Our local ",(0,i.jsx)(n.code,{children:"talawa_lint"})," package (located in ",(0,i.jsx)(n.code,{children:"talawa/talawa_lint"}),") often has a ",(0,i.jsx)(n.code,{children:"pubspec.yaml"})," that constrains ",(0,i.jsx)(n.code,{children:"analyzer"})," to an older version (e.g., ",(0,i.jsx)(n.code,{children:"< 6.0"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Only running ",(0,i.jsx)(n.code,{children:"flutter pub upgrade"})," in the root folder ",(0,i.jsx)(n.strong,{children:"does not"})," update the constraints in the sub-package, causing the build to fail."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-to-fix-it",children:"How to Fix It"}),"\n",(0,i.jsxs)(n.p,{children:["If your upgrade is blocked by ",(0,i.jsx)(n.code,{children:"talawa_lint"})," or similar local packages, follow this workflow:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Locate the Sub-Package"}),":\nGo to the ",(0,i.jsx)(n.code,{children:"talawa_lint"})," directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd talawa_lint\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Update Constraints"}),":\nOpen ",(0,i.jsx)(n.code,{children:"talawa_lint/pubspec.yaml"})," and broaden the version constraints for conflicting packages (usually ",(0,i.jsx)(n.code,{children:"analyzer"})," or ",(0,i.jsx)(n.code,{children:"custom_lint"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'dependencies:\n  analyzer: ">=5.12.0 <7.0.0" # Example: Increase the upper bound\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Upgrade Sub-Package"}),":\nRun upgrade inside the directory to generate a new lockfile for it:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"flutter pub upgrade\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Handle Stubborn Conflicts (Dependency Overrides)"}),":\nSometimes, a package (like ",(0,i.jsx)(n.code,{children:"hive_generator"}),") might still strictly require an older ",(0,i.jsx)(n.code,{children:"analyzer"})," version even after you fix ",(0,i.jsx)(n.code,{children:"talawa_lint"}),". In this case, you may need to force a newer version in the root ",(0,i.jsx)(n.code,{children:"pubspec.yaml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'dependency_overrides:\n  analyzer: ">=6.0.0 <8.0.0" # Force compatible range\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Upgrade Main Project"}),":\nReturn to the root directory and attempt the main upgrade again:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ..\nflutter pub upgrade\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"diagnosing-conflicts",children:"Diagnosing Conflicts"}),"\n",(0,i.jsx)(n.p,{children:"To see exactly which package is causing a version lock, use the verbose flag:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"flutter pub upgrade -v\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Look for lines indicating that ",(0,i.jsx)(n.code,{children:"talawa depends on talawa_lint"})," which in turn depends on a specific version of ",(0,i.jsx)(n.code,{children:"analyzer"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},45906:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(30758);const i={},a=r.createContext(i);function l(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);