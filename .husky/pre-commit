#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Check if any Dart files have changed
if git diff --name-only --cached | grep -q '\.dart$'; then
  echo "Dart files changed. Generating docs..."

  # Run the Generate Docs script from repo root
  if ! bash scripts/docusaurus/generate_docs.sh; then
    echo "‚ùå Error: Documentation generation failed. Aborting commit."
    exit 1
  fi

  # Add the generated docs to git
  git add docs/docs/auto-docs
else
  echo "No Dart files changed. Skipping doc generation."
fi
